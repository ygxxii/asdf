import{_ as t,r as l,o as c,c as r,a as s,b as e,d as n,e as o}from"./app.cdf89d63.js";const p={},i=o(`<h1 id="asdf" tabindex="-1"><a class="header-anchor" href="#asdf" aria-hidden="true">#</a> asdf</h1><p><code>asdf</code> 核心贡献指南.</p><h2 id="初始化安装" tabindex="-1"><a class="header-anchor" href="#初始化安装" aria-hidden="true">#</a> 初始化安装</h2><p>在 Github 上 fork <code>asdf</code> 并且/或者使用 Git 克隆默认分支：</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;"># 克隆你 fork 的 asdf</span></span>
<span class="line"><span style="color:#F8F8F2;">git clone https://github.com/</span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">GITHUB_USER</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;">/asdf.git</span></span>
<span class="line"><span style="color:#88846F;"># 或者直接克隆 asdf</span></span>
<span class="line"><span style="color:#F8F8F2;">git clone https://github.com/asdf-vm/asdf.git</span></span>
<span class="line"></span></code></pre></div><p>核心开发所需的工具都列举在这个存储库的 <code>.tool-versions</code> 文件中。如果你想要使用 <code>asdf</code> 自身来管理它，请使用以下命令添加这些插件：</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">asdf plugin add bats https://github.com/timgluz/asdf-bats.git</span></span>
<span class="line"><span style="color:#F8F8F2;">asdf plugin add shellcheck https://github.com/luizm/asdf-shellcheck.git</span></span>
<span class="line"><span style="color:#F8F8F2;">asdf plugin add shfmt https://github.com/luizm/asdf-shfmt.git</span></span>
<span class="line"></span></code></pre></div><p>使用以下命令安装这些版本来开发 <code>asdf</code>：</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">asdf install</span></span>
<span class="line"></span></code></pre></div><p>在本地机器的开发过程中不使用 <code>asdf</code> 来管理工具 <em>或许</em> 对你有帮助，因为你可能需要打破某些可能会影响到你的开发工具链的功能。以下是所需工具的原始列表：</p>`,10),d={href:"https://github.com/bats-core/bats-core",target:"_blank",rel:"noopener noreferrer"},h={href:"https://github.com/koalaman/shellcheck",target:"_blank",rel:"noopener noreferrer"},u={href:"https://github.com/mvdan/sh",target:"_blank",rel:"noopener noreferrer"},F=o(`<h2 id="开发" tabindex="-1"><a class="header-anchor" href="#开发" aria-hidden="true">#</a> 开发</h2><p>如果你想要在不更改已安装的 <code>asdf</code> 的情况下尝试应用你的更改，可以将 <code>$ASDF_DIR</code> 变量设置为克隆存储库的路径，并临时将目录的 <code>bin</code> 和 <code>shims</code> 目录添加到你的路径中。</p><p>最好在提交或推送到远程之前，在本地做好格式化、lint 检查和测试你的代码。可以使用以下脚本/命令：</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;"># 脚本检查</span></span>
<span class="line"><span style="color:#F8F8F2;">./scripts/shellcheck.bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 格式化</span></span>
<span class="line"><span style="color:#F8F8F2;">./scripts/shfmt.bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 测试：所有案例</span></span>
<span class="line"><span style="color:#F8F8F2;">bats test/</span></span>
<span class="line"><span style="color:#88846F;"># 测试：特定命令</span></span>
<span class="line"><span style="color:#F8F8F2;">bats test/list_commands.bash</span></span>
<span class="line"></span></code></pre></div>`,4),f={class:"custom-container tip"},b=s("p",{class:"custom-container-title"},"提示",-1),_=s("strong",null,"增加测试！",-1),m={href:"https://bats-core.readthedocs.io/en/stable/index.html",target:"_blank",rel:"noopener noreferrer"},g=s("h2",{id:"bats-测试",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#bats-测试","aria-hidden":"true"},"#"),e(" Bats 测试")],-1),y=s("strong",null,"强烈建议",-1),k={href:"https://bats-core.readthedocs.io/en/stable/index.html",target:"_blank",rel:"noopener noreferrer"},v=o(`<p>Bats 调试有时可能很困难。使用带有 <code>-t</code> 标识的 TAP 输出将使你能够在测试执行期间打印带有特殊文件描述符 <code>&gt;&amp;3</code> 的输出，从而简化调试。例如：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;"># test/some_tests.bats</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">printf</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;%s\\n&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;Will not be printed during bats test/some_tests.bats&quot;</span></span>
<span class="line"><span style="color:#66D9EF;">printf</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;%s\\n&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;Will be printed during bats -t test/some_tests.bats&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">&gt;&amp;3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),x={href:"https://bats-core.readthedocs.io/en/stable/writing-tests.html#printing-to-the-terminal",target:"_blank",rel:"noopener noreferrer"},B=s("h2",{id:"拉取请求、发布以及约定式提交",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#拉取请求、发布以及约定式提交","aria-hidden":"true"},"#"),e(" 拉取请求、发布以及约定式提交")],-1),E=s("code",null,"asdf",-1),q={href:"https://github.com/googleapis/release-please",target:"_blank",rel:"noopener noreferrer"},S={href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"},D={href:"https://github.com/asdf-vm/asdf/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"},w={href:"https://www.conventionalcommits.org/zh-hans/",target:"_blank",rel:"noopener noreferrer"},V={href:"https://github.com/amannn/action-semantic-pull-request",target:"_blank",rel:"noopener noreferrer"},G=s("code",null,"amannn/action-semantic-pull-request",-1),I=o(`<p>约定式提交遵循以下格式：</p><div class="language-text" data-ext="text"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">&lt;type&gt;[optional scope][optional !]: &lt;description&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;!-- 例子 --&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">fix: some fix</span></span>
<span class="line"><span style="color:#F8F8F2;">feat: a new feature</span></span>
<span class="line"><span style="color:#F8F8F2;">docs: some documentation update</span></span>
<span class="line"><span style="color:#F8F8F2;">docs(website): some change for the website</span></span>
<span class="line"><span style="color:#F8F8F2;">feat!: feature with breaking change</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre></div><p><code>&lt;types&gt;</code> 的所有类型包含： <code>feat</code>、<code>fix</code>、<code>docs</code>、<code>style</code>、<code>refactor</code>、<code>perf</code>、<code>test</code>、<code>build</code>、<code>ci</code>、<code>chore</code>、<code>revert</code>。</p><ul><li><code>!</code>：表示重大更改</li><li><code>fix</code>：将会创建一个新的 SemVer <code>patch</code> 补丁</li><li><code>feat</code>：将会创建一个新的 SemVer <code>minor</code> 小版本</li><li><code>&lt;type&gt;!</code>：将会创建一个新的 SemVer <code>major</code> 大版本</li></ul><p>拉取请求标题必须遵循这种格式。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>请使用约定式提交信息格式作为拉取请求标题。</p></div><h2 id="docker-镜像" tabindex="-1"><a class="header-anchor" href="#docker-镜像" aria-hidden="true">#</a> Docker 镜像</h2>`,7),N={href:"https://github.com/vic/asdf-alpine",target:"_blank",rel:"noopener noreferrer"},z={href:"https://github.com/vic/asdf-ubuntu",target:"_blank",rel:"noopener noreferrer"};function A(P,T){const a=l("ExternalLinkIcon");return c(),r("div",null,[i,s("ul",null,[s("li",null,[s("a",d,[e("bats-core"),n(a)]),e("：Bash 自动化测试系统，用于单元测试 Bash 或 POSIX 兼容脚本。")]),s("li",null,[s("a",h,[e("shellcheck"),n(a)]),e("：Shell 脚本的静态分析工具。")]),s("li",null,[s("a",u,[e("shfmt"),n(a)]),e("：支持 Bash 的 Shell 解析器、格式化器和解释器；包含 shfmt。")])]),F,s("div",f,[b,s("p",null,[_,e(" - 新特性需要进行测试，并加快错误修复的审查速度。请在创建拉取请求之前覆盖新的代码路径。查看 "),s("a",m,[e("bats-core 文档"),n(a)]),e(" 了解更多。")])]),g,s("p",null,[y,e("在编写测试之前检查现有的测试套件和 "),s("a",k,[e("bats-core 文档"),n(a)]),e("。")]),v,s("p",null,[e("进一步相关文档请查看 bats-core 的 "),s("a",x,[e("Printing to the Terminal"),n(a)]),e(" 部分.")]),B,s("p",null,[E,e(" 正在使用一个名为 "),s("a",q,[e("Release Please"),n(a)]),e(" 的自动发布工具来自动碰撞 "),s("a",S,[e("SemVer"),n(a)]),e(" 版本并生成 "),s("a",D,[e("变更日志"),n(a)]),e("。这个信息是通过读取自上次发布以来的提交历史记录来确定的。")]),s("p",null,[s("a",w,[e("约定式提交"),n(a)]),e(" 定义了拉取请求标题的格式，该标题成为默认分支上的提交消息格式。这是通过 Github Action "),s("a",V,[G,n(a)]),e(" 强制执行的。")]),I,s("p",null,[s("a",N,[e("asdf-alpine"),n(a)]),e(" 和 "),s("a",z,[e("asdf-ubuntu"),n(a)]),e(" 项目正在努力提供一些 asdf 工具的容器化镜像。你可以使用这些容器镜像作为开发服务器的基础镜像，或者运行生产应用。")])])}const R=t(p,[["render",A],["__file","core.html.vue"]]);export{R as default};
